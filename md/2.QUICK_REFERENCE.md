# Kotlin & Android 快速参考卡片

> 快速查阅常用语法和概念对比

## 语法速查

### 变量与函数

```kotlin
// 变量
val immutable = "不可变"    // const
var mutable = "可变"        // let
val typed: String = "类型"  // : type

// 函数
fun greet(name: String): String = "Hello $name"
fun add(a: Int, b: Int) = a + b  // 单表达式

// 默认参数
fun greet(name: String = "World") = "Hello $name"
```

### 空安全

```kotlin
var name: String? = null           // 可空类型
val length = name?.length          // 安全调用
val display = name ?: "Default"    // Elvis 操作符
val force = name!!.length          // 非空断言（危险）
```

### 集合操作

```kotlin
val list = listOf(1, 2, 3)
val doubled = list.map { it * 2 }
val filtered = list.filter { it > 1 }
val sum = list.reduce { acc, n -> acc + n }
```

### 数据类

```kotlin
data class User(val name: String, val age: Int)
val user = User("Alice", 25)
val updated = user.copy(age = 26)
```

## Compose 基础

### 组件定义

```kotlin
@Composable
fun MyComponent(text: String) {
    Text(text = text)
}
```

### Modifier 常用

```kotlin
Modifier
    .padding(16.dp)
    .fillMaxWidth()
    .background(Color.Blue)
    .clickable { /* onClick */ }
```

### 状态管理

```kotlin
var count by remember { mutableStateOf(0) }
Button(onClick = { count++ }) {
    Text("Count: $count")
}
```

### 布局组件

```kotlin
Column { }      // 垂直布局（类似 flex-col）
Row { }         // 水平布局（类似 flex-row）
Box { }         // 重叠布局（类似 position: relative）
```

## 常用操作

### Android Studio

| 操作 | 快捷键 |
|------|--------|
| 运行 | `Shift + F10` |
| 停止 | `Ctrl + F2` |
| 格式化 | `Ctrl + Alt + L` |
| 快速修复 | `Alt + Enter` |
| 查找文件 | `Ctrl + Shift + N` |
| 同步 Gradle | 点击通知栏 "Sync Now" |

### 日志调试

```kotlin
import android.util.Log

Log.d("TAG", "Debug message")
Log.e("TAG", "Error message")
Log.w("TAG", "Warning message")
```

### 字符串资源

```xml
<!-- res/values/strings.xml -->
<string name="app_name">Comic Reader</string>
```

```kotlin
// 使用
Text(text = stringResource(R.string.app_name))
```

## 项目结构速查

```
app/
├── build.gradle.kts          # 依赖配置
├── src/main/
│   ├── java/.../             # Kotlin 代码
│   │   ├── MainActivity.kt   # 主入口
│   │   └── ui/theme/         # 主题配置
│   ├── res/                  # 资源文件
│   │   ├── values/           # 字符串、颜色等
│   │   └── mipmap-*/         # 应用图标
│   └── AndroidManifest.xml   # 应用配置
```

## 前端对应关系

| Android | 前端 |
|---------|------|
| Activity | Route/Page |
| @Composable | React Component |
| Modifier | className + style |
| remember + mutableStateOf | useState |
| Column/Row | flex-col/flex-row |
| MaterialTheme | Theme Provider |
| build.gradle.kts | package.json |
| res/values/strings.xml | i18n |

## 常见问题

**Q: 如何添加依赖？**
A: 在 `app/build.gradle.kts` 的 `dependencies {}` 中添加，然后同步

**Q: 如何创建新页面？**
A: 创建新的 Activity/Composable，在 AndroidManifest.xml 注册（如需）

**Q: 如何调试？**
A: 使用 Logcat 查看日志，或添加断点使用调试器

**Q: Preview 不显示？**
A: 确保有 `@Preview` 注解，点击右侧 "Split" 或 "Design" 视图

**Q: 如何查看错误？**
A: 查看底部的 "Build" 标签页，红色表示错误

